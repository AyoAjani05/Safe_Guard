<!DOCTYPE html>
<html>
<head>
  <base href="/">
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="SafeGuard - Emergency Contact Directory">

  <title>SafeGuard</title>
  
  <style>
    body {
      background-color: #fcfcfc;
      margin: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      width: 100vw;
      font-family: 'Segoe UI', sans-serif;
      overflow: hidden;
    }

    #loading-indicator {
      display: flex;
      flex-direction: column;
      align-items: center;
      transition: opacity 0.5s ease-out;
    }

    .pulse-logo {
      width: 100px; height: 100px;
      background: linear-gradient(135deg, #f44336 0%, #b71c1c 100%);
      border-radius: 24px;
      display: flex; justify-content: center; align-items: center;
      position: relative;
      animation: bounce 2s infinite ease-in-out;
      z-index: 10;
    }

    .pulse-logo i { color: white; font-size: 42px; font-weight: 900; font-style: normal; }

    .pulse-logo::before {
      content: ''; position: absolute; width: 100%; height: 100%;
      background-color: #f44336; border-radius: 24px;
      z-index: -1; animation: ripple 2s infinite;
    }

    .loading-text {
      margin-top: 40px; font-size: 14px; color: #b71c1c;
      font-weight: bold; letter-spacing: 2px; text-transform: uppercase;
      animation: fadeText 1.5s infinite alternate;
    }

    @keyframes ripple { 0% { transform: scale(1); opacity: 0.8; } 100% { transform: scale(1.8); opacity: 0; } }
    @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-12px); } }
    @keyframes fadeText { from { opacity: 0.3; } to { opacity: 1; } }
  </style>
</head>
<body>

  <div id="loading-indicator">
    <div class="pulse-logo"><i>SOS</i></div>
    <div class="loading-text" id="status-text">Initializing System</div>
  </div>

  <script>
    // This macro is replaced by Flutter's build tool with the actual loading logic
    {{flutter_bootstrap_js}}

    // Modern Hook to remove the loader once the app is ready
    window.addEventListener('load', function() {
      const loader = document.getElementById('loading-indicator');
      
      // We check if the Flutter Engine is initialized
      const checkEngine = setInterval(() => {
        if (document.querySelector('flutter-view')) {
          loader.style.opacity = '0';
          setTimeout(() => loader.remove(), 500);
          clearInterval(checkEngine);
        }
      }, 100);
    });
  </script>
</body>
</html>